# Variables

## 一般事项

### 变量定义

- 隐式声明

	- 危险
	- 关闭隐式声明
	- 声明全部的变量
	- 遵循某种命名规则
	- 检查变量名

		- 生成交叉引用列表

### 变量初始化

- 问题

	- 未对变量赋值
	- 变量值已过期
	- 变量一部分被赋值

		- 指针

- 建议

	- 声明变量的时候初始化
	- 若不支持，则在靠近变量第一次使用的位置初始化它

		- 就近原则

	- 在靠近第一次使用变量的位置声明和定义该变量
	- 尽量使用final或者const
	- 注意计数器和累加器
	- 在类的构造函数里初始化该类的数据成员
	- 检查是否需要重新初始化
	- 一次性初始化具名常量

		- 用可执行代码来初始化变量

			- startUp()

	- 使用编译器设置来自动初始化所有变量

		- 编译器依赖

	- 利用编译器的警告信息
	- 检查输入参数的合法性
	- 使用内存访问工具检查错误的指针
	- 程序开始时初始化工作内存

		- 预填充工具

			- 如填0，0xCC

		- 填充工具晃动
		- 启动时初始化工作内存

			- 隐藏缺陷

### 作用域

- 变量引用局部化

	- 攻击窗口
	- 跨度

- 缩短存活时间

	- 对代码更准确的认识
	- 减少初始化错误的可能
	- 可读性
	- 便于重构

- 全局变量跨度和生存时间都很长
- 减小作用域

	- 循环开始之前再初始化循环里使用的变量
	- 直到变量即将被使用时再为其赋值
	- 相关语句放在一起
	- 相关语句提取成单独的子程序
	- 开始时采用最严格的可见性
	- 平衡方便性和智力可管理性

### 持续性

- 形态

	- 特定代码段或子程序的生命期

		- for循环

	- 只要允许就会持续下去

		- c++ delete之前的对象

	- 程序生命期

		- static

	- 永远持续

		- 数据库

- 变量实际生命期比你想象的短

	- 调试代码或断言
	- 抛弃变量时置空

		- null

	- 编写代码时假设数据没有持续性

		- 支持static的语言例外

	- 养成声明和初始化的习惯

### 绑定时间

- 绑定越晚越灵活但程序复杂度增加
- 时间

	- 编码时

		- magic number

	- 编译时

		- 具名常量

	- 加载时

		- 从注册表，外部文件读取

	- 对象实例化时

		- 创建弹窗时读取

	- 即使

		- 弹窗重绘时读取

- 平衡灵活性和复杂度

### 数据类型和控制结构

- 序列型数据

	- 顺序语句

- 选择型数据

	- if,case

- 迭代行数据

	- 循环

		- 容器，记录，数组

- 组合型数据

### 单一用途

- 不要为了节省空间破坏程序可读性和可维护性
- 避免代码具有隐式含义

	- 双重用途

		- 如-1表示出错

- 使用所有已声明的变量

*XMind: ZEN - Trial Version*