# Code Improvement

## 软件质量概述

### 软件质量的特性

- 外在特征

	- 正确性
	- 可用性
	- 效率
	- 可靠性

		- 平均无故障时间

	- 完整性

		- 访问限制

	- 适应性

		- 执行环境

	- 精确性
	- 健壮性

- 内部特征

	- 可维护性
	- 灵活性
	- 可移植性
	- 可重用性
	- 可读性
	- 可测试性
	- 可理解性

		- 内在一致性

- 要让所有特性都能表现得尽善尽美绝无可能
- 内在特性和外在特性相互影响

### 改善软件质量的技术

- 软件质量目标

	- 明确定义

- 明确定义质量保证工作
- 测试策略

	- 与产品需求、架构以及设计相关联

- 软件工程指南

	- 控制软件技术特性
	- 应用

		- 问题定义
		- 需求分析
		- 架构设计
		- 构建
		- 系统测试

- 非正式技术复查

	- review

		- 桌面检查
		- 代码走查

- 正式技术复查

	- 质量门

		- 检查某一阶段的产品是否已经具备了进入下一阶段所要求的质量
		- 判断需求或者架构是否已经足够的好

- 外部审查
- 开发过程

	- 对变更进行控制的过程

		- 有效的管理

	- 结果的量化

		- 正确性、可用性以及效率

	- 制作原型

- 设置目标

	- 明确质量目标

### 相对效能

- 组合运用

	- 极限编程

- 找出缺陷的成本

	- 检查比测试的成本更小

- 修正缺陷的成本

	- 缺陷存在时长影响修复成本
	- 检查代码能同时修复问题

- 建议

	- 对所有需求、架构以及系统关键部分的设计进行正是检查
	- 建模或者创建原型
	- 代码阅读或检查
	- 执行测试

### 时机

- 早期阶段

### 普遍原理

- 改善质量以降低开发成本

	- 减少花在代码返工上的时间

		- 耗时：调试以修正那些无法正常工作的代码

	- 每人每天10到50行最终交付代码

- 编写无缺陷软件并不一定花更多的时间
- 与编码-测试-调试相比，先进的软件质量计划可能更省钱

	- 缺陷更少，开发时间更短，成本更低
	- 没有付出更多，只是对资源进行重新分配

- 软件质量是面向过程的，与制造业面向结果不一样

## 协同构建

### 将展示工作的过程正式化

### 实践概要

- 包括

	- 结对编程
	- 正式检查
	- 非正式技术复查
	- 文档阅读

- 工作中开发人员总会对某些错误点视而不见
- 首要目的是改善软件质量

	- 缩短开发周期
	- 降低开发成本
	- 捕获错误比测试效能更高，错误类型也不同于测试
	- 让人们意识到他们的工作会被复查

- 有利于传授公司文化以及编程专业知识

	- 程序设计主观方面的回馈
	- 复查提供了一个技术交流平台

		- 培养新人以提高其代码质量的好机会

- 集体所有权

	- 代码属于团队

		- 多人检查，协力编写
		- 个人离开项目影响变小
		- 缺陷修正周期变短

			- 团队中任何一员都可以修正

	- 交叉覆盖结束复查，结对编程，轮换指派修正任务

- 构建前后都应保持协作

	- 适用于评估、计划、需求、架构、测试以及维护工作等阶段

### 结对编程

- 关键

	- 准则

		- 用编码规范来支持结对编程

			- 风格标准化

		- 不要让结对编程变成旁观
		- 不要强迫在简单的问题上使用结对编程

			- 白板+独立编程
			- 部分工作采用结对编程

		- 有规律地对结对人员和分配的工作任务进行轮换
		- 鼓励双方跟上对方的步伐
		- 确认两人都能看到显示器
		- 不要强迫程序员与自己关系紧张的人组对
		- 避免新手组合
		- 指定一个组长

	- 好处

		- 压力之下状态更佳
		- 改善代码质量

			- 代码可读性和可理解性倾向于团队最优秀程序员水平

		- 缩短进度时间表
		- 享受协同构建的好处

			- 传播公司文化
			- 指导初级程序员
			- 培养集体归属感

### 正式检查

- 结果

	- 去除产品中70%到85%的缺陷

		- 占用10%-15%的项目预算，降低项目的整体成本

	- 评估进度

- 人员角色

	- 主持人

		- 技术上面必须能够胜任
		- 能理解设计和代码的细节

	- 作者

		- 表达自己

	- 评论员

		- 找出缺陷

	- 经理

		- 最好不要参与
		- 容易由技术问题转换到行政问题
		- 准备一份详细报告让经理了解情况

	- 详查的结果都不应当作为员工表现的评估标准
	- 对员工的表现评估应当基于最终产品，而不是尚未完成的工作
	- 人数

		- 不应少于三人，需要单独的主持人、作者和评论员
		- 限制在六人左右

- 一般步骤

	- 计划

		- 主持人提供打印带有行号的注意核对表

			- 便于快速标识错误

	- 概述

		- 谨慎使用

			- 代码应该自我表达

	- 准备

		- 独立详查

			- 应用程序

				- 500行/h

			- 系统级代码

				- 125行/h

		- 每个评论员赋予某一特定视角

			- 赋予待详查场景

	- 详查会议

		- 主持人挑选出除作者之外的某个人阐述设计或阅读代码

			- 包含每个分支

		- 讨论在确定错误时停止
		- 保留以前的记录
		- 150-200行/h非空非注释代码
		- 不讨论解决方案，把注意力保持在识别缺陷上

	- 详查报告

		- 收集数据以证明其存在的必要性

	- 返工
	- 跟进

		- 评论员重新详查整个工作成果

	- 第三个小时会议

		- 非正式会议讨论解决方案

	- 细调

		- 对详查过程精雕细琢
		- 更新适应自身需求的核对表

			- 限制在一页以内

- 自尊心

	- 详查过程应该是正面的

		- 团队参与使程序得到了明显改善
		- 对所有参与者都是一个学习的过程

	- 作者来负责决定如何处理缺陷

		- 享受寻找缺陷的乐趣

- 总结

	- 自我优化

		- 正式的反馈循环

	- 详查过程展示了改模型的最高级别的状况，这一过程使系统化和可重复的，并且使用了量化的反馈方法来自我改进

### 其他

- 走查

	- 特点

		- 由作者主持
		- 焦点在技术事宜上
		- 参与者通过阅读设计或代码进行准备
		- 提供技术交流的机会
		- 持续30-60分钟
		- 重点在于检测错误，而非修正
		- 经理不会参加
		- 概念灵活

	- 对代码进行同事互查的成本极端的高
	- 采用时机

		- 复查团队较大
		- 有其他组织的评审员参与

- 代码阅读

	- 定义

		- 两到三个人参与

			- 鼓励竞争

		- 独立阅读代码

			- 4000行左右，1天1000行

		- 与代码作者开会讨论

			- 1-2小时
			- 集中在发现的问题上而不用遍历代码

	- 特点

		- 代码阅读更多地关注对代码进行的独立复查，而不是关注会议本身
		- 时间更多分布在代码阅读而非会议上
		- 适用于人员地理位置分散的情况
		- 90%的缺陷都是在复查会议做准备的时候发现的

- 公开演示

	- 政府项目常见
	- 管理层复查而非技术复查
	- 通常不会改善软件品质

*XMind: ZEN - Trial Version*